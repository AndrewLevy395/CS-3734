<div class="mat-elevation-z5 raised" id="schedule-view-container">
  <div class="spinner-container">
    <mat-progress-spinner *ngIf="!week" mode="indeterminate"></mat-progress-spinner>
  </div>

  <div *ngIf="!errorMessage">
    <h1 *ngIf="week">{{week.name}}<span *ngIf="secretCode" color="primary"> â€” Organizer Mode</span></h1>

    <p *ngIf="week && !secretCode">Click on an open time slot to schedule a meeting</p>
    
    <p *ngIf="secretCode">Click on an unfilled time slot to toggle it between open and closed</p>
    
    <p *ngIf="secretCode">Click on a time or date to open/close all time slots for that time/date</p>
    
    <mat-grid-list *ngIf="week" [cols]="numDays + 1" rowHeight="100px">
      <mat-grid-tile
          *ngFor="let tile of tiles; let i = index"
          [attr.data-index]="i"
          (click)="timeSlotClick(tile.text, tile.text2, i)"
          [ngClass]="tile.class">{{tile.text}}<br>{{tile.text2}}
      </mat-grid-tile>
    </mat-grid-list>
  </div>
  
  <div *ngIf="errorMessage">
    <h2>{{errorMessage}}</h2>
  </div>
  
</div>

<div class="button-container" *ngIf="week && !errorMessage">
  <button mat-raised-button color="primary" type="button" (click)="goToPreviousWeek()" [disabled]="!hasPreviousWeek">
    <i class="material-icons">navigate_before</i>
    PREVIOUS WEEK
  </button>
    
  <button mat-raised-button color="primary" type="button" (click)="goToNextWeek()" [disabled]="!hasNextWeek">
    NEXT WEEK
    <i class="material-icons">navigate_next</i>
  </button>
</div>

<div class="options">
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Show my meeting
        </mat-panel-title>
        <mat-panel-description>
          View or cancel a meeting based on its secret code
        </mat-panel-description>
      </mat-expansion-panel-header>
      
      <p>
      Enter the secret code you received when you created your meeting in the box below.
      </p>
      
      <mat-form-field>
        <input matInput maxlength="6" #mscInput placeholder="Your secret code">
      </mat-form-field>
      
      <p>{{this.vsMessage}}</p>
        
      <mat-action-row>
        <button mat-button type="button" (click)="cancelMeeting(mscInput.value)" color="warn">CANCEL MEETING</button>
        <button mat-button type="button" (click)="getMeeting(mscInput.value)">VIEW MEETING</button>
      </mat-action-row>

    </mat-expansion-panel>
    
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Edit this schedule
        </mat-panel-title>
        <mat-panel-description>
          Options for organizers
        </mat-panel-description>
      </mat-expansion-panel-header>
      
      <p>
      Enter the secret code for this schedule below to all the details and organizer options available.
      </p>
      
      <mat-form-field>
        <input matInput maxlength="6" #sscInput placeholder="Your secret code">
      </mat-form-field>
      
      <mat-action-row>
        <button mat-button type="button" color="warn" (click)="deleteSchedule(sscInput.value)">DELETE SCHEDULE</button>
        <button mat-button type="button" (click)="leaveOrganizerMode()" *ngIf="secretCode">LEAVE ORGANIZER MODE</button>
        <button mat-button type="button" (click)="getTimeSlotsOrganizer(sscInput.value)" *ngIf="!secretCode" #secretCodeInput>ORGANIZER MODE</button>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</div>
